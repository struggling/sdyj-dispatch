{"version":3,"sources":["uni-app:///main.js","webpack:///D:/xiaoma/项目/sdyj-dispatch/pages/index/index.vue?f25b","webpack:///D:/xiaoma/项目/sdyj-dispatch/pages/index/index.vue?f0f7","webpack:///D:/xiaoma/项目/sdyj-dispatch/pages/index/index.vue?9ccd","webpack:///D:/xiaoma/项目/sdyj-dispatch/pages/index/index.vue?491b","uni-app:///pages/index/index.vue","webpack:///D:/xiaoma/项目/sdyj-dispatch/pages/index/index.vue?2ca4"],"names":["createPage","Page","renderjs","component","options","__file","components","uNavbar","uNoticeBar","uBadge","uModal","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped"],"mappings":";;;;wEAAA,qBACA,sBACA,yC,mDACAA,EAAWC,a;;;;2DCHX,ySACIC,EADJ,6JASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,WACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,wBACZ,aAAAF,E;;;;2GCvBf,qkC;;;;2GCAA,8LAAIG,EAAa,CACfC,QAAS,WACP,OAAO,8KAITC,WAAY,WACV,OAAO,sMAITC,OAAQ,WACN,OAAO,wKAITC,OAAQ,WACN,OAAO,yKAKPC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACJH,EAAII,MAAMC,IAEjBC,GAAmB,EACnBC,EAAkB,GACtBR,EAAOS,eAAgB,G;;;;2DC7BvB,isBAA2oB,eAAG,G;;;;4OCiH9oB,GATA,uCASA,6D,+WAVA,2CAIA,oC,g6CAQA,CACA,mBACA,YACA,WACA,SACA,UACA,YACA,UACA,iBAEA,KAVA,WAWA,OACA,UACA,QAEA,YACA,SAYA,aACA,aACA,QACA,QACA,MACA,YACA,aACA,wBACA,WACA,UACA,eACA,UACA,YACA,4DAEA,YACA,aACA,QACA,0EACA,kBACA,UACA,iBACA,WACA,UACA,WACA,kBAEA,CACA,WACA,kBAIA,aACA,YACA,OACA,YAGA,QAnEA,aAsEA,OAtEA,WAsEA,WAOA,sCACA,qCACA,wBACA,kBACA,uBACA,eACA,YACA,gBAEA,kBACA,MAEA,qBAIA,UAEA,cAFA,WAGA,yCACA,kCACA,kBACA,mBACA,sBACA,mBACA,QACA,IACA,+BACA,gCACA,8BACA,0BAEA,kBAEA,uBAGA,cACA,qBACA,WACA,OACA,YAGA,6CAOA,OAhIA,SAgIA,cACA,MACA,eACA,gBAEA,WAGA,iBACA,oBAEA,mCACA,iBACA,+BAKA,iBAKA,oCAKA,kBACA,qCACA,uDACA,eACA,aACA,8BAUA,SAEA,aAFA,WAEA,WAGA,mBACA,kBAEA,uBACA,0BAEA,OAKA,UAhBA,SAgBA,GACA,gBACA,gBAIA,UAtBA,SAsBA,GACA,+BACA,iBAIA,sBACA,kBAEA,oBAIA,SAnCA,aAwCA,UAxCA,SAwCA,cACA,4BAEA,GADA,eACA,GACA,SACA,MACA,KACA,eACA,yBACA,WACA,sBACA,iBACA,gBACA,MACA,kBACA,OACA,2CACA,SAEA,iBAEA,kBACA,eAEA,kBACA,mBACA,eACA,wBACA,UACA,yBAEA,YACA,6BAuCA,aACA,WACA,2BACA,oBACA,WACA,sBAEA,cACA,kCAEA,UACA,yBAMA,uBAGA,aACA,UAEA,UAKA,MA3IA,WA4IA,0BAGA,aA/IA,WAyJA,WACA,gCACA,aACA,cACA,MACA,mBAEA,QAPA,SAOA,GACA,mBACA,gBAEA,KAXA,SAWA,GACA,mBASA,cA9KA,SA8KA,SACA,cAKA,cACA,qBAOA,WACA,OACA,OACA,OACA,0BAEA,OADA,yCACA,gBAKA,UAvMA,WAuMA,WACA,iBACA,eACA,QACA,gBAEA,kBAGA,kBACA,wBAEA,uBACA,YACA,6BA8BA,YAnPA,WAmPA,uIACA,4BACA,GAGA,EACA,2BACA,2BAGA,eAEA,cACA,gBACA,MACA,OACA,QACA,gBAEA,iBAEA,kBAGA,kBACA,wBAEA,0BAEA,YACA,8BAOA,EACA,2BAKA,cACA,gBACA,MACA,OACA,gBAEA,iBAEA,kBAGA,kBACA,wBAEA,0BACA,YACA,6BA3DA,8CAkJA,WArYA,WAqYA,WACA,iBACA,mBACA,MACA,mBAEA,iBAEA,kBAGA,kBACA,wBACA,yBAEA,YACA,6BA4EA,QAjeA,WAmeA,eACA,OACA,WACA,aACA,cACA,oBACA,qBACA,qBACA,aACA,2CACA,SACA,eACA,wBACA,kBACA,8BACA,4CACA,wCACA,uBACA,WACA,QACA,kBACA,wCACA,UAIA,UAGA,iBAhgBA,WAigBA,WACA,aACA,2BACA,QAFA,WAGA,qBAEA,KALA,WAMA,gBACA,gBACA,mCAMA,gBAhhBA,WAihBA,WACA,eACA,aACA,kBACA,QAHA,SAGA,GACA,eACA,oCACA,mCACA,sBACA,wBAEA,0CACA,wCAEA,oBACA,wCAEA,eACA,oCAEA,QAHA,SAGA,GAEA,6CAEA,YACA,8BAEA,6CACA,yCACA,qBACA,qBACA,mDACA,eACA,4BAGA,KAnBA,SAmBA,GACA,eACA,sBAKA,KA1CA,SA0CA,GACA,mBAQA,YArkBA,WAukBA,aACA,iBACA,2BACA,oBACA,UACA,eACA,QADA,SACA,GACA,8BAIA,UACA,aACA,wBACA,YACA,mBASA,YA/lBA,WA+lBA,WACA,kCAEQ,EAAR,qBAQA,kBArxBA,SAqxBA,GACA,OACA,4BACA,0BACA,qC;;;;2DC54BA,s/BAAg8B,eAAG,G","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=57280228&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components = {\n  uNavbar: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-navbar/u-navbar\" */ \"@/uview-ui/components/u-navbar/u-navbar.vue\"\n    )\n  },\n  uNoticeBar: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-notice-bar/u-notice-bar\" */ \"@/uview-ui/components/u-notice-bar/u-notice-bar.vue\"\n    )\n  },\n  uBadge: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-badge/u-badge\" */ \"@/uview-ui/components/u-badge/u-badge.vue\"\n    )\n  },\n  uModal: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-modal/u-modal\" */ \"@/uview-ui/components/u-modal/u-modal.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<!-- 自定义导航栏 -->\r\n\t\t<u-navbar :is-back=\"false\" title=\"接单池\" :height=\"height\" :background=\"background\" title-color=\"#ffffff\">\r\n\t\t\t<view class=\"slot-wrap\" @tap=\"openConfirm\">\r\n\t\t\t\t{{address}}\r\n\t\t\t</view>\r\n\t\t</u-navbar>\r\n\t\t<!-- 自定义收藏我的小程序 -->\r\n\t\t<add-tip :tip=\"tip\" :duration=\"duration\" />\r\n\t\t<mescroll-body ref=\"mescrollRef\" @init=\"mescrollInit\" @down=\"downCallback\" @up=\"upCallback\" :down=\"downOption\" :up=\"upOption\">\r\n\t\t<view class=\"content\">\r\n\r\n\t\t\t<!-- 地理位置 -->\r\n\t\t\t<!-- <view class=\"location theme\">\r\n\t\t\t\t<span class=\"iconfont icondiliweizhi\"></span>\r\n\t\t\t\t<span>仁寿县</span>\r\n\t\t\t</view> -->\r\n\t\t\t<!-- 滚动通知 -->\r\n\t\t\t<u-notice-bar mode=\"vertical\" :list=\"notice\" :duration=\"2500\" bg-color=\"#E2F7FF\" color=\"#010101\"></u-notice-bar>\r\n\t\t\t<!-- 接单列表 -->\r\n\t\t\t<!-- 表头 -->\r\n\t\t\t<view class=\"tab-bar\">\r\n\t\t\t\t<block v-for=\"(tab,index) in tabBars\" :key=\"tab.id\">\r\n\t\t\t\t\t<view :class=\"{active:tabIndex == index}\" @tap=\"xuanzhong(index)\">\r\n\t\t\t\t\t\t{{tab.name}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</block>\r\n\t\t\t</view>\r\n\t\t\t<!-- 列表 -->\r\n\t\t\t\r\n\t\t\t<view class=\"uni-tab-bar\">\r\n\t\t\t\t<swiper class=\"swiper-box\" :style=\"{height:swiperheight+'px'}\"  :current=\"tabIndex\" @change=\"tabChange\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t<swiper-item>\r\n\t\t\t\t\t\t<scroll-view  scroll-y=\"true\" class=\"list\">\r\n\t\t\t\t\t\t\t<!-- <mescroll-uni ref=\"mescrollRef\" @init=\"mescrollInit\" @down=\"downCallback\" @up=\"upCallback\" :down=\"downOption\" :up=\"upOption\" > -->\r\n\t\t\t\t\t\t\t\t<template v-if=\"orderlist.length>0\">\r\n\t\t\t\t\t\t\t\t\t<block v-for=\"(item,index) in orderlist\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t\t\t<orderList :item=\"item\" :index=\"index\" :tool=\"tool\"  @openModel=\"openModel\"></orderList>\r\n\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<!-- nothing -->\r\n\t\t\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t\t\t<noThing></noThing>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<!-- </mescroll-uni> -->\r\n\t\t\t\t\t\t\t<!-- 上拉加载 -->\r\n\t\t\t\t\t\t\t<!-- <load-more :loadtext=\"loadtext\"></load-more> -->\r\n\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t</swiper-item>\r\n\t\t\t\t\t<swiper-item>\r\n\t\t\t\t\t\t<scroll-view  scroll-y=\"true\" class=\"list\"  >\r\n\t\t\t\t\t\t\t<!-- <template v-if=\"takelist.length>0\">\r\n\t\t\t\t\t\t\t\t<block v-for=\"(item,index) in takelist\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t\t<Already :item=\"item\" :index=\"index\" :tool=\"tool\" :jl=\"jl\" @openModel=\"openModel\"></Already>\r\n\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t</template> -->\r\n\t\t\t\t\t\t\t<!-- nothing -->\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<!-- <mescroll-uni ref=\"mescrollRef1\" @init=\"mescrollInit\" @down=\"downCallback\" @up=\"upCallback\" :down=\"downOption\" :up=\"upOption\" > -->\r\n\t\t\t\t\t\t\t\t<template v-if=\"takelist.length>0\">\r\n\t\t\t\t\t\t\t\t\t<block v-for=\"(item,index) in takelist\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t\t\t<Already :item=\"item\" :index=\"index\" :tool=\"tool\" :jl=\"jl\" @openModel=\"openModel\"></Already>\r\n\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<!-- nothing -->\r\n\t\t\t\t\t\t\t\t<!-- <mescroll-empty v-if=\"orderlist.length==0\" ></mescroll-empty> -->\r\n\t\t\t\t\t\t\t\t<template v-else>\r\n\t\t\t\t\t\t\t\t\t<noThing></noThing>\r\n\t\t\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t\t<!-- </mescroll-uni> -->\r\n\t\t\t\t\t\t\t<!-- 上拉加载 -->\r\n\t\t\t\t\t\t\t<!-- <load-more :loadtext=\"loadtext\"></load-more> -->\r\n\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t</swiper-item>\r\n\t\t\t\t\t\r\n\t\t\t\t</swiper>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 动态数字角标提醒 -->\r\n\t\t\t<u-badge type=\"error\" :count=\"badgeconts\" style=\"position: absolute;top: 110upx;left: 720upx;\"></u-badge>\r\n\t\t\t<!-- model -->\r\n\t\t\t<u-modal v-model=\"show\" :content=\"content\"></u-modal>\r\n\t\t\t<!-- popup -->\r\n\t\t\t<!-- <u-popup v-model=\"showpopup\" mode=\"center\" border-radius=\"8\" width=\"80%\" ref=\"popup\">\r\n\t\t\t\t<view>\r\n\t\t\t\t\t<view class=\"iconfont iconclose\" style=\"text-align: right;font-size: 40upx;color: #CCCCCC;padding-right: 20upx;padding-top: 20upx;\"\r\n\t\t\t\t\t @tap=\"close\"></view>\r\n\t\t\t\t\t<h2 style=\"text-align: center;font-size: 40upx;font-weight: bold;margin-top: 30upx;margin-bottom: 60upx;\">温馨提示</h2>\r\n\t\t\t\t\t<p style=\"padding-left: 50upx;padding-right: 50upx;margin-bottom: 30upx;line-height: 1.8;\">您已经成功参与抢单，该订单需要平台工作人员进行人工审核；审核通过后请到“订单”列表查看具体订单信息并且联系客户预约上门进行服务</p>\r\n\t\t\t\t</view>\r\n\t\t\t</u-popup> -->\r\n\t\t</view>\r\n\t\t </mescroll-body>\r\n\t</view>\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n\tconst Mock = require(\"../../common//mock.mp.js\");\r\n\timport md5 from \"../../common/md5.min.js\";\r\n\t//引入小程序微信小程序JavaScriptSDK\r\n\t// const QQMapWX = require('../../libs/qqmap-wx-jssdk.js');\r\n\tvar bmap = require('../../libs/bmap-wx.js');\r\n\timport loadMore from \"../../components/common/load-more.vue\";\r\n\timport addTip from \"../../components/struggler-uniapp-add-tip/struggler-uniapp-add-tip\";\r\n\timport noThing from \"../../components/common/no-thing.vue\";\r\n\timport orderList from \"../../components/index/orderlist.vue\";\r\n\timport Already from \"../../components/index/already.vue\";\r\n\timport MescrollMixin from \"@/components/mescroll-uni/mescroll-mixins.js\";\r\n\timport MescrollEmpty from '@/components/mescroll-uni/components/mescroll-empty.vue';\r\n\texport default {\r\n\t\tmixins: [MescrollMixin],\r\n\t\tcomponents: {\r\n\t\t\tloadMore,\r\n\t\t\taddTip,\r\n\t\t\tnoThing,\r\n\t\t\torderList,\r\n\t\t\tAlready,\r\n\t\t\tMescrollEmpty\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tupOption:{\r\n\t\t\t\t\tuse:false\r\n\t\t\t\t},\r\n\t\t\t\tdownOption:{\r\n\t\t\t\t\tauto:false,\r\n\t\t\t\t\t// empty:{\r\n\t\t\t\t\t//   use : true ,\r\n\t\t\t\t\t//   icon : null ,\r\n\t\t\t\t\t//   tip : \"暂无相关数据\",\r\n\t\t\t\t\t//   btnText : \"\",\r\n\t\t\t\t\t//   fixed: false,\r\n\t\t\t\t\t//   top: \"100rpx\",\r\n\t\t\t\t\t//   zIndex: 99\r\n\t\t\t\t\t// }\r\n\t\t\t\t},\r\n\t\t\t\t// distance:[],\r\n\t\t\t\tbadgeconts:0,\r\n\t\t\t\ttriggered: true,\r\n\t\t\t\tphone:1,\r\n\t\t\t\ttool:[],\r\n\t\t\t\tjl:[],\r\n\t\t\t\tlatitude: '',\r\n\t\t\t\tlongitude: \"\",\r\n\t\t\t\ttip: \"点击「添加小程序」，下次访问更便捷\",\r\n\t\t\t\tduration: 1,\r\n\t\t\t\tistype: \"\",\r\n\t\t\t\taddress: \"当前位置\",\r\n\t\t\t\theight: \"\",\r\n\t\t\t\tbackground: {\r\n\t\t\t\t\tbackgroundImage: \"linear-gradient(90deg, #54C3F1, #00ABEB)\",\r\n\t\t\t\t},\r\n\t\t\t\tuser_uid: \"\",\r\n\t\t\t\tshowpopup: false,\r\n\t\t\t\tshow: false,\r\n\t\t\t\tcontent: '您已经成功参与抢单，该订单需要平台工作人员进行人工审核；审核通过后请到“订单”列表查看具体订单信息并且联系客户预约上门进行服务',\r\n\t\t\t\tloadtext: \"上拉加载更多\",\r\n\t\t\t\tnotice: [],\r\n\t\t\t\tswiperheight: 500,\r\n\t\t\t\ttabIndex: 0,\r\n\t\t\t\ttabBars: [{\r\n\t\t\t\t\t\tname: \"待抢单\",\r\n\t\t\t\t\t\tid: \"daiqiangdan\"\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tname: \"已抢单\",\r\n\t\t\t\t\t\tid: \"yiqiangdan\"\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t],\r\n\t\t\t\torderlist: [],\r\n\t\t\t\ttakelist:[],\r\n\t\t\t\tpage:1,\r\n\t\t\t\tistake:false\r\n\t\t\t}\r\n\t\t},\r\n\t\tonReady() {\r\n\t\t},\r\n\t\t\r\n\t\tonShow() {\r\n\t\t\t//检查登录授权\r\n\t\t\t// 检查登录是否过期\r\n\t\t\t// async function (){\r\n\t\t\t\t\r\n\t\t\t// }\r\n\t\t\t//判断用户是否注册服务工种,获取缓存里面的值\r\n\t\t\tthis.user_uid = uni.getStorageSync('uid');\r\n\t\t\tthis.phone = uni.getStorageSync('phone');\r\n\t\t\tthis.getAuthorizeInfo();\r\n\t\t\tthis.checklogin();\r\n\t\t\tsetTimeout(()=>{\r\n\t\t\t\tuni.hideLoading({\r\n\t\t\t\t\ttitle:\"加载中\",\r\n\t\t\t\t\tduration:1500\r\n\t\t\t\t})\r\n\t\t\t\tthis.getWOrkstay();\r\n\t\t\t},1500);\r\n\t\t\t\r\n\t\t\tconsole.log(\"重新排序\");\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\tcomputed:{\r\n\t\t\t//重新排序待派单订单\r\n\t\t\tsortOrderlist(){\r\n\t\t\t\tfor (var i = 0; i < this.orderlist.length; i++) {\r\n\t\t\t\t\tlet location = this.orderlist[i].longitude;\r\n\t\t\t\t\tlet str1 = location.split(\",\")[0];\r\n\t\t\t\t\tstr1 = str1.substring(0,9);\r\n\t\t\t\t\tlet str2 = location.split(\",\")[1];\r\n\t\t\t\t\tstr2 = str2.substring(0,9);\r\n\t\t\t\t\tvar longitude = str1;\r\n\t\t\t\t\tvar latitude = str2;\r\n\t\t\t\t\tlet latitude1 = uni.getStorageSync(\"latitude\");\r\n\t\t\t\t\tlet longitude1 = uni.getStorageSync(\"longitude\");\r\n\t\t\t\t\tvar jl = this.countDistance(latitude1, longitude1, latitude, longitude);\r\n\t\t\t\t\tjl = Math.floor(jl/1000 * 10) / 10;\r\n\t\t\t\t\t// this.distance =this.distance.push(jl);\r\n\t\t\t\t\tconsole.log(\"距离\");\r\n\t\t\t\t\t// console.log(this.distance);\r\n\t\t\t\t\tthis.orderlist[i].jl = jl;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\tfunction compare(property){\r\n\t\t\t\t    return function(a,b){\r\n\t\t\t\t        var value1 = a[property];\r\n\t\t\t\t        var value2 = b[property];\r\n\t\t\t\t        return value1 - value2;\r\n\t\t\t\t    }\r\n\t\t\t\t}\r\n\t\t\t\treturn this.orderlist.sort(compare('longitude'));\r\n\t\t\t\tconsole.log(\"排序\");\r\n\t\t\t\tconsole.log(this.orderlist.sort(compare('longitude')));\r\n\t\t\t},\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\tonLoad(event) {\r\n\t\t\tlet tabbar = event.e;\r\n\t\t\tconsole.log(tabbar);\r\n\t\t\tthis.tabIndex = tabbar;\r\n\t\t\t// this.checklogin();\r\n\t\t\tvar that = this;\r\n\t\t\t\r\n\t\t\t// 获取scoll-view高度值\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t// console.log(res.windowHeight);\r\n\t\t\t\t\tlet height = res.windowHeight - uni.upx2px(300);\r\n\t\t\t\t\tthis.swiperheight = height;\r\n\t\t\t\t\tconsole.log(this.swiperheight);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// mock数据通知栏\r\n\t\t\tthis.getNavbar();\r\n\t\t\t//判断用户是否注册服务工种,获取缓存里面的值\r\n\t\t\t// this.user_uid = uni.getStorageSync('uid');\r\n\t\t\t// this.phone = uni.getStorageSync('phone');\r\n\t\t\t// uni.setStorageSync(\"badgecont\",this.badgecont);\r\n\t\t\tconsole.log(\"uid的值:\"+this.user_uid);\r\n\t\t\t//加载mock假数据\r\n\t\t\t// let data = this.getmock();\r\n\t\t\t// this.orderlist = data.orderlist;\r\n\t\t\t// console.log(this.orderlist);\r\n\t\t\tthis._freshing = false;\r\n\t\t\tuni.$on('updatebadgecont',function(badgecont){\r\n\t\t\t         console.log('监听到事件来自 update ，携带参数 msg 为：' + badgecont.badgecont);\r\n\t\t\t\t\t that.badgeconts++;\r\n\t\t\t\t\t that.tabIndex = 1;\r\n\t\t\t\t\t console.log(that.badgeconts);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t},\r\n\t\t// onPullDownRefresh() {\r\n\t\t// \tthis.getWOrkstay();\r\n\t\t// \tthis.getAlready();\r\n\t\t// \tconsole.log(\"下拉刷新\");\r\n\t\t// },\r\n\t\t\r\n\t\tmethods: {\r\n\t\t\t/*下拉刷新的回调 */\r\n\t\t\tdownCallback() {\r\n\t\t\t\t// 这里加载你想下拉刷新的数据, 比如刷新轮播数据\r\n\t\t\t\t// loadSwiper();\r\n\t\t\t\tthis.getWOrkstay();\r\n\t\t\t\tthis.getAlready();\r\n\t\t\t\t// 下拉刷新的回调,默认重置上拉加载列表为第一页 (自动执行 page.num=1, 再触发upCallback方法 )\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.mescroll.endSuccess();\r\n\t\t\t\t\t// console.log('111');\r\n\t\t\t\t},1500)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// tabs通知swiper切换\r\n\t\t\t//tabbar点击事件\r\n\t\t\txuanzhong(index) {\r\n\t\t\t\tthis.tabIndex = index;\r\n\t\t\t\tconsole.log(index);\r\n\t\t\t\t// this.getWOrkstay();\r\n\t\t\t},\r\n\t\t\t//滑动切换\r\n\t\t\ttabChange(e) {\r\n\t\t\t\tthis.tabIndex = e.detail.current;\r\n\t\t\t\tif(e.detail.current == 0){\r\n\t\t\t\t\t\t// this.getWOrkstay();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(e.detail.current == 1){\r\n\t\t\t\t\t\tthis.getAlready();\r\n\t\t\t\t\t\t// this.$refs.popup.open();\r\n\t\t\t\t\t\tthis.badgeconts = 0;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//上拉加载\r\n\t\t\tloadmore() {\r\n\t\t\t\t\r\n\t\t\t},\r\n\r\n\t\t\t// model,发送抢单请求\r\n\t\t\topenModel(index) {\r\n\t\t\t\tlet phone = uni.getStorageSync('phone');\r\n\t\t\t\tconsole.log(phone);\r\n\t\t\t\tif (phone) {\r\n\t\t\t\t\tlet indextag = true;\r\n\t\t\t\t\tif(indextag){\r\n\t\t\t\t\t\tindextag = false;\r\n\t\t\t\t\t\tthis.istake = true;\r\n\t\t\t\t\t\tconsole.log(this.istake);\r\n\t\t\t\t\t\tlet that = this;\r\n\t\t\t\t\t\tlet code = that.orderlist[index].code;\r\n\t\t\t\t\t\tthis.$myRequest({\r\n\t\t\t\t\t\t\turl:'work/take',\r\n\t\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\t\tuid:this.user_uid,\r\n\t\t\t\t\t\t\t\tcode:code,//订单编号\r\n\t\t\t\t\t\t\t\tWorkNautica:[this.longitude,this.latitude],\r\n\t\t\t\t\t\t\t\tphone:phone\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tmethods:\"POST\"\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t// const data = JSON.parse(res.data);\r\n\t\t\t\t\t\t\tif(res.data.code == 200){\r\n\t\t\t\t\t\t\t\tconsole.log(res.msg);\r\n\t\t\t\t\t\t\t\tthis.badgeconts++;\r\n\t\t\t\t\t\t\t\tthis.orderlist.splice(index,1);\r\n\t\t\t\t\t\t\t\tthis.show = true;\r\n\t\t\t\t\t\t\t\tthis.takelist = res.data.data;\r\n\t\t\t\t\t\t\t\t// this.mescroll.endSuccess();\r\n\t\t\t\t\t\t\t}else if(res.data.code == 300){\r\n\t\t\t\t\t\t\t\tconsole.log(res.msg);\r\n\t\t\t\t\t\t\t\t// this.mescroll.endSuccess();\r\n\t\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t\tconsole.log(res.msg)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// uni.request({\r\n\t\t\t\t\t\t// \turl:this.$apiUrl+\"work/take\",\r\n\t\t\t\t\t\t// \tmethod:\"POST\",\r\n\t\t\t\t\t\t// \tdataType:JSON,\r\n\t\t\t\t\t\t// \tdata:{\r\n\t\t\t\t\t\t// \t\tuid:this.user_uid,\r\n\t\t\t\t\t\t// \t\tcode:code,//订单编号\r\n\t\t\t\t\t\t// \t\tWorkNautica:[this.longitude,this.latitude],\r\n\t\t\t\t\t\t// \t\tphone:phone\r\n\t\t\t\t\t\t// \t},\r\n\t\t\t\t\t\t// \tsuccess(res) {\r\n\t\t\t\t\t\t// \t\tconsole.log(res);\r\n\t\t\t\t\t\t// \t\tconsole.log(\"当前点击的为：\"+index);\r\n\t\t\t\t\t\t// \t\tif(res.code = 200){\r\n\t\t\t\t\t\t// \t\t\t//抢单成功体醒\r\n\t\t\t\t\t\t// \t\t\tthat.show = true;\r\n\t\t\t\t\t\t// \t\t\t//删除该订单\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t// \t\t\tthat.badgeconts++;\r\n\t\t\t\t\t\t// \t\t\t that.orderlist.splice(index,1);\r\n\t\t\t\t\t\t// \t\t}else{\r\n\t\t\t\t\t\t// \t\t\tuni.showToast({\r\n\t\t\t\t\t\t// \t\t\t\ttitle:\"无网络!\"\r\n\t\t\t\t\t\t// \t\t\t})\r\n\t\t\t\t\t\t// \t\t}\r\n\t\t\t\t\t\t// \t},\r\n\t\t\t\t\t\t// \tfail() {\r\n\t\t\t\t\t\t// \t\tconsole.log(res);\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// })\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t    title: '提示',\r\n\t\t\t\t\t    content: '请先完成师傅服务类型注册，在抢单',\r\n\t\t\t\t\t    success: function (res) {\r\n\t\t\t\t\t        if (res.confirm) {\r\n\t\t\t\t\t            console.log('用户点击确定');\r\n\t\t\t\t\t\t\t\t//如果没有手机说明用户没有注册跳转\r\n\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\turl:\"../settlement/settlement\"\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t        } else if (res.cancel) {\r\n\t\t\t\t\t            console.log('用户点击取消');\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t        }\r\n\t\t\t\t\t    }\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tlet code  = this.orderlist[index].code;\r\n\t\t\t\tlet that = this;\r\n\t\t\t\t//请求一次\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle:indextag\r\n\t\t\t\t})\r\n\t\t\t\tlet indextag = true;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t//closemode\r\n\t\t\tclose() {\r\n\t\t\t\tthis.$refs.popup.close();\r\n\t\t\t},\r\n\t\t\t//openpage\r\n\t\t\topenWaitlist() {\r\n\t\t\t\t//判断用户类型值是否存在，\r\n\t\t\t\t//接受一个判断师傅类型的参数\r\n\t\t\t\t// const urlpath = \"'../wait-list/wait-list'\";\r\n\t\t\t\t// const ydurl = \"../settlement/settlement\";\r\n\t\t\t\t// const openurl = \"\";\r\n\t\t\t\t// this.istype ? openurl = urlpath : openurl = ydurl;\r\n\t\t\t\t// uni.navigateTo({\r\n\t\t\t\t// \turl: openurl,\r\n\t\t\t\t// })\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:this.$apiUrl+\"work/already\",\r\n\t\t\t\t\tmethod:\"GET\",\r\n\t\t\t\t\tdataType:JSON,\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tuid:this.user_uid\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\tconsole.log(\"已抢单\");\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(res) {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//计算距离\r\n\t\t\t//计算两点直线路径\r\n\t\t\tcountDistance(la1, lo1, la2, lo2) {\r\n\t\t\t\tvar FINAL = 6378137.0\r\n\t\t\t\t/** \r\n\t\t\t\t * 求某个经纬度的值的角度值 \r\n\t\t\t\t * @param {Object} d \r\n\t\t\t\t */\r\n\t\t\t\tfunction calcDegree(d) {\r\n\t\t\t\t\treturn d * Math.PI / 180.0;\r\n\t\t\t\t}\r\n\t\t\t\t/** \r\n\t\t\t\t * 根据两点经纬度值，获取两地的实际相差的距离 \r\n\t\t\t\t * @param {Object} f    第一点的坐标位置[latitude,longitude] \r\n\t\t\t\t * @param {Object} t    第二点的坐标位置[latitude,longitude] \r\n\t\t\t\t */\r\n\t\t\t\tvar flat = calcDegree(la1);\r\n\t\t\t\tvar flng = calcDegree(lo1);\r\n\t\t\t\tvar tlat = calcDegree(la2);\r\n\t\t\t\tvar tlng = calcDegree(lo2);\r\n\t\t\t\tvar result = Math.sin(flat) * Math.sin(tlat);\r\n\t\t\t\tresult += Math.cos(flat) * Math.cos(tlat) * Math.cos(flng - tlng);\r\n\t\t\t\treturn Math.acos(result) * FINAL;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//获取通知栏信息\r\n\t\t\tgetNavbar(){\r\n\t\t\t\tthis.$myRequest({\r\n\t\t\t\t\turl:'work/msg',\r\n\t\t\t\t\tdata:{},\r\n\t\t\t\t\tmethods:\"GET\"\r\n\t\t\t\t\t\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t// \tconsole.log(res);\r\n\t\t\t\t// const data = JSON.parse(res.data);\r\n\t\t\t\t\tif(res.data.code == 200){\r\n\t\t\t\t\t\tconsole.log(res.data.msg);\r\n\t\t\t\t\t\t// this.mescroll.endSuccess();\r\n\t\t\t\t\t\tthis.notice = res.data.data;\r\n\t\t\t\t\t}else if(res.data.code == 300){\r\n\t\t\t\t\t\tconsole.log(res.data.msg);\r\n\t\t\t\t\t\t// this.mescroll.endSuccess();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.log(res.data.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// const Random = Mock.Random;\r\n\t\t\t\t// Random.county();\r\n\t\t\t\t// Random.cname();\r\n\t\t\t\t// Random.city();\r\n\t\t\t\t// Random.datetime();\r\n\t\t\t\t// const data = Mock.mock({\r\n\t\t\t\t// \t'list|3': [{\r\n\t\t\t\t// \t\tname: \"@cname()\",\r\n\t\t\t\t// \t\tcity: '@city(true)',\r\n\t\t\t\t// \t\t\"type|+1\": [\r\n\t\t\t\t// \t\t\t\"日常保洁\",\r\n\t\t\t\t// \t\t\t\"开荒保洁\",\r\n\t\t\t\t// \t\t\t\"上门除甲醛\",\r\n\t\t\t\t// \t\t\t\"上门维修\",\r\n\t\t\t\t// \t\t]\r\n\t\t\t\t// \t}]\r\n\t\t\t\t// });\r\n\t\t\t\t// for (var i = 0; i < data.list.length; i++) {\r\n\t\t\t\t// \tvar str = \"恭喜--\" + data.list[i].name + \"--抢到\" + data.list[i].city + \"--\" + data.list[i].type + \"--订单\";\r\n\t\t\t\t// \tthis.notice.push(str);\r\n\t\t\t\t// }\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//获取待派单列表信息\r\n\t\t\tasync getWOrkstay(){\r\n\t\t\t\tlet phone = uni.getStorageSync('phone');\r\n\t\t\t\tif(phone){\r\n\t\t\t\t\t// console.log(\"data里面的地理精度\");\r\n\t\t\t\t\t// console.log(this.latitude);\r\n\t\t\t\t\tlet that  =this;\r\n\t\t\t\t\tlet str = uni.getStorageSync(\"type\");\r\n\t\t\t\t\tlet town = uni.getStorageSync(\"town\");\r\n\t\t\t\t\t// this.mescroll.endSuccess();\r\n\t\t\t\t\t// console.log(cookie);\r\n\t\t\t\t\tlet type = str.split(\",\");\r\n\t\t\t\t\t// await this.getAllClass();\r\n\t\t\t\t\tthis.$myRequest({\r\n\t\t\t\t\t\turl:'work/stay',\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\t\"town\":town ,\r\n\t\t\t\t\t\t\t\"genre\": type,\r\n\t\t\t\t\t\t\t\"uid\": this.user_uid,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmethods:\"POST\"\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t// \tconsole.log(res);\r\n\t\t\t\t\t// const data = JSON.parse(res.data);\r\n\t\t\t\t\t\tif(res.data.code == 200){\r\n\t\t\t\t\t\t\tconsole.log(res.data.msg);\r\n\t\t\t\t\t\t\t// this.mescroll.endSuccess();\r\n\t\t\t\t\t\t\tthis.orderlist = res.data.data;\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else if(res.data.code == 300){\r\n\t\t\t\t\t\t\tconsole.log(res.data.msg);\r\n\t\t\t\t\t\t\t// this.mescroll.endSuccess();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tconsole.log(res.data.msg)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet that  =this;\r\n\t\t\t\t\tlet town = uni.getStorageSync(\"town\");\r\n\t\t\t\t\t// this.mescroll.endSuccess();\r\n\t\t\t\t\t// console.log(cookie);\r\n\r\n\t\t\t\t\t// await this.getAllClass();\r\n\t\t\t\t\tthis.$myRequest({\r\n\t\t\t\t\t\turl:'work/stay',\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\t\"town\":town ,\r\n\t\t\t\t\t\t\t\"uid\": this.user_uid,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmethods:\"POST\"\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t// \tconsole.log(res);\r\n\t\t\t\t\t// const data = JSON.parse(res.data);\r\n\t\t\t\t\t\tif(res.data.code == 200){\r\n\t\t\t\t\t\t\tconsole.log(res.data.msg);\r\n\t\t\t\t\t\t\t// this.mescroll.endSuccess();\r\n\t\t\t\t\t\t\tthis.orderlist = res.data.data;\r\n\t\t\t\t\t\t}else if(res.data.code == 300){\r\n\t\t\t\t\t\t\tconsole.log(res.data.msg);\r\n\t\t\t\t\t\t\t// this.mescroll.endSuccess();\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tconsole.log(res.data.msg)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t//这里只需要传入不同的接口地址就可以\r\n\t\t\t\t// console.log(res);\r\n\r\n\t\t\t\t// uni.request({\r\n\t\t\t\t// \turl: this.$apiUrl+\"work/stay\",\r\n\t\t\t\t// \tmethod: \"POST\",\r\n\t\t\t\t// \tdataType: JSON,\r\n\t\t\t\t// \theader:{\r\n\t\t\t\t// \t\t'content-type': 'application/x-www-form-urlencoded',\r\n\t\t\t\t// \t\t 'cookie':cookie//读取cookie\r\n\t\t\t\t// \t},\r\n\t\t\t\t// \tdata: {\r\n\t\t\t\t// \t\t\"town\":town ,\r\n\t\t\t\t// \t\t\"genre\": type,\r\n\t\t\t\t// \t\t\"uid\": this.user_uid,\r\n\t\t\t\t// \t\t\"token\":token\r\n\t\t\t\t// \t},\r\n\t\t\t\t// \tsuccess(res) {\r\n\t\t\t\t// \t\tconsole.log(res);\r\n\t\t\t\t// \t\t// uni.stopPullDownRefresh();\r\n\t\t\t\t// \t\tconst data = JSON.parse(res.data);\r\n\t\t\t\t// \t\tconsole.log(data.data);\r\n\t\t\t\t// \t\tif(data.code == 200){\r\n\t\t\t\t// \t\t\t// console.log(res)\r\n\t\t\t\t\r\n\t\t\t\t// \t\t\t// that.mescroll.endSuccess();\r\n\t\t\t\t// \t\t\tthat.orderlist = data.data;\r\n\t\t\t\t// \t\t\t// this.triggered = true;\r\n\t\t\t\t// \t\t\tconsole.log(\"订单列表:\");\r\n\t\t\t\t// \t\t\tconsole.log(that.orderlist);\r\n\t\t\t\t// \t\t\t//计算经纬度距离和循环遍历工具要求\r\n\t\t\t\t// \t\t\t// for (var i = 0; i < that.orderlist.length; i++) {\r\n\t\t\t\t// \t\t\t// \tconsole.log(\"订单数据长度\"+that.orderlist.length);\r\n\t\t\t\t// \t\t\t// \tvar location = that.orderlist[i].longitude;\r\n\t\t\t\t// \t\t\t// \t// console.log(location);\r\n\t\t\t\t// \t\t\t// \t// let index = str .lastIndexOf(\">\")\r\n\t\t\t\t// \t\t\t// \t//客户距离\r\n\t\t\t\t// \t\t\t// \tlet str1 = location.split(\",\")[0];\r\n\t\t\t\t// \t\t\t// \tstr1 = str1.substring(0,9);\r\n\t\t\t\t// \t\t\t// \tlet str2 = location.split(\",\")[1];\r\n\t\t\t\t// \t\t\t// \tstr2 = str2.substring(0,9);\r\n\t\t\t\t// \t\t\t// \tconsole.log(\"str1-\"+str1);\r\n\t\t\t\t// \t\t\t// \tvar longitude = str1;\r\n\t\t\t\t// \t\t\t// \tvar latitude = str2;\r\n\t\t\t\t// \t\t\t// \t//计算距离\r\n\t\t\t\t// \t\t\t// \tlet latitude1 = uni.getStorageSync(\"latitude\");\r\n\t\t\t\t// \t\t\t// \tlet longitude1 = uni.getStorageSync(\"longitude\");\r\n\t\t\t\t// \t\t\t// \t//我的距离\r\n\t\t\t\t// \t\t\t// \tconsole.log(that.latitude);\r\n\t\t\t\t// \t\t\t// \tconsole.log(that.longitude);\r\n\t\t\t\t// \t\t\t// \tconsole.log(latitude);\r\n\t\t\t\t// \t\t\t// \tconsole.log(longitude);\r\n\t\t\t\t// \t\t\t// \tvar jl = that.countDistance(latitude1, longitude1, latitude, longitude);\r\n\t\t\t\t// \t\t\t// \tjl = Math.floor(jl/1000 * 10) / 10;\r\n\t\t\t\t// \t\t\t// \tthat.jl = that.jl.concat(jl);\r\n\t\t\t\t// \t\t\t// \tconsole.log(\"距离\");\r\n\t\t\t\t// \t\t\t// \tconsole.log(that.jl);\r\n\t\t\t\t// \t\t\t// }\r\n\t\t\t\t// \t\t}else if(data.code == 300){\r\n\t\t\t\t// \t\t\tuni.showToast({\r\n\t\t\t\t// \t\t\t\ttitle:\"该地区没有相关工单\"\r\n\t\t\t\t// \t\t\t})\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t\telse{\r\n\t\t\t\t// \t\t\tconsole.log(res);\r\n\t\t\t\t// \t\t\tuni.showToast({\r\n\t\t\t\t// \t\t\t\ttitle:\"无网络\"\r\n\t\t\t\t// \t\t\t})\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t// \t},\r\n\t\t\t\t// \tfail(err) {\r\n\t\t\t\t// \t\tconsole.log(err);\r\n\t\t\t\t// \t}\r\n\t\t\t\t// })\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//获取已抢单列表信息\r\n\t\t\tgetAlready(){\r\n\t\t\t\tthis.$myRequest({\r\n\t\t\t\t\turl:'work/already',\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\"uid\": this.user_uid,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tmethods:\"POST\"\r\n\t\t\t\t\t\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t// \tconsole.log(res);\r\n\t\t\t\t// const data = JSON.parse(res.data);\r\n\t\t\t\t\tif(res.data.code == 200){\r\n\t\t\t\t\t\tconsole.log(res.data.msg);\r\n\t\t\t\t\t\tthis.takelist = res.data.data;\r\n\t\t\t\t\t\t// this.mescroll.endSuccess();\r\n\t\t\t\t\t}else if(res.data.code == 300){\r\n\t\t\t\t\t\tconsole.log(res.data.msg);\r\n\t\t\t\t\t\t// this.mescroll.endSuccess();\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tconsole.log(res.data.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// let that  =this;\r\n\t\t\t\t// uni.request({\r\n\t\t\t\t// \turl: this.$apiUrl+\"work/already\",\r\n\t\t\t\t// \tmethod: \"POST\",\r\n\t\t\t\t// \tdataType: JSON,\r\n\t\t\t\t// \tdata: {\r\n\t\t\t\t// \t\tuid: this.user_uid\r\n\t\t\t\t// \t},\r\n\t\t\t\t// \t success(res) {\r\n\t\t\t\t// \t\tconsole.log(res);\r\n\t\t\t\t// \t\tconst data = JSON.parse(res.data);\r\n\t\t\t\t// \t\tconsole.log(data.data);\r\n\t\t\t\t// \t\t// uni.stopPullDownRefresh();\r\n\t\t\t\t// \t\tif(data.code == 200){\r\n\t\t\t\t// \t\t\t// console.log(res)\r\n\t\t\t\t// \t\t\tthat.takelist = data.data;\r\n\t\t\t\t// \t\t\t// console.log(\"已抢单订单列表:\");\r\n\t\t\t\t// \t\t\t// console.log(that.takelist);\r\n\t\t\t\t// \t\t\t// // var jl = await that.countDistance( 39.923423,116.368904,116.387271,39.922501);\r\n\t\t\t\t// \t\t\t// // console.log(\"距离\"+jl);\r\n\t\t\t\t// \t\t\t// //计算经纬度距离\r\n\t\t\t\t// \t\t\tfor (var i = 0; i < that.takelist.length; i++) {\r\n\t\t\t\t// \t\t\t\tconsole.log(\"订单数据长度\"+that.takelist.length);\r\n\t\t\t\t// \t\t\t\tvar location = that.takelist[i].longitude;\r\n\t\t\t\t// \t\t\t\t// console.log(location);\r\n\t\t\t\t// \t\t\t\t// let index = str .lastIndexOf(\">\")\r\n\t\t\t\t// \t\t\t\t//客户距离\r\n\t\t\t\t// \t\t\t\tlet str1 = location.split(\",\")[0];\r\n\t\t\t\t// \t\t\t\tstr1 = str1.substring(0,9);\r\n\t\t\t\t// \t\t\t\tlet str2 = location.split(\",\")[1];\r\n\t\t\t\t// \t\t\t\tstr2 = str2.substring(0,9);\r\n\t\t\t\t// \t\t\t\tconsole.log(\"str1-\"+str1);\r\n\t\t\t\t// \t\t\t\tvar longitude = str1;\r\n\t\t\t\t// \t\t\t\tvar latitude = str2;\r\n\t\t\t\t// \t\t\t\t//计算距离\r\n\t\t\t\t// \t\t\t\tlet latitude1 = uni.getStorageSync(\"latitude\");\r\n\t\t\t\t// \t\t\t\tlet longitude1 = uni.getStorageSync(\"longitude\");\r\n\t\t\t\t// \t\t\t\t//我的距离\r\n\t\t\t\t// \t\t\t\tconsole.log(that.latitude);\r\n\t\t\t\t// \t\t\t\tconsole.log(that.longitude);\r\n\t\t\t\t// \t\t\t\tconsole.log(latitude);\r\n\t\t\t\t// \t\t\t\tconsole.log(longitude);\r\n\t\t\t\t// \t\t\t\tvar jl = that.countDistance(latitude1, longitude1, latitude, longitude);\r\n\t\t\t\t// \t\t\t\tjl = Math.floor(jl/1000 * 10) / 10;\r\n\t\t\t\t// \t\t\t\tthat.jl = jl;\r\n\t\t\t\t// \t\t\t\tconsole.log(\"距离\");\r\n\t\t\t\t// \t\t\t\tconsole.log(that.jl);\r\n\t\t\t\t// \t\t\t}\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t\telse if(data.code == 300){\r\n\t\t\t\t// \t\t\tuni.showToast({\r\n\t\t\t\t// \t\t\t\ttitle:\"无最新工单\",\r\n\t\t\t\t// \t\t\t\tduration:2000\r\n\t\t\t\t// \t\t\t})\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t\telse{\r\n\t\t\t\t// \t\t\tconsole.log(res);\r\n\t\t\t\t// \t\t\tuni.showToast({\r\n\t\t\t\t// \t\t\t\ttitle:\"无网络\"\r\n\t\t\t\t// \t\t\t})\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t// \t},\r\n\t\t\t\t// \tfail(err) {\r\n\t\t\t\t// \t\tconsole.log(err);\r\n\t\t\t\t// \t}\r\n\t\t\t\t// })\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//mock假数据\r\n\t\t\tgetmock(){\r\n\t\t\t\t//如果用户没有注册使用假数据\r\n\t\t\t\tconst Random = Mock.Random;\r\n\t\t\t\tRandom.id();\r\n\t\t\t\tRandom.county();\r\n\t\t\t\tRandom.datetime()\r\n\t\t\t\tconst orderData = Mock.mock({\r\n\t\t\t\t\t\t'orderlist|30-50': [{\r\n\t\t\t\t\t\t\t\"Distance|1-100.2\":1,\r\n\t\t\t\t\t\t\t\"budget|100-500\": 500,\r\n\t\t\t\t\t\t\tcode: '@id()',\r\n\t\t\t\t\t\t\t\"content|1\": [\"日常保洁\",\"开荒保洁\",\"上门除甲醛\",\"家电维修\"],\r\n\t\t\t\t\t\t\tdelete: 0,\r\n\t\t\t\t\t\t\tdestination: \"\",\r\n\t\t\t\t\t\t\tdoor_time: '@datetime()',\r\n\t\t\t\t\t\t\tduration: \"时长：2小时\",\r\n\t\t\t\t\t\t\tlabel: \"扫把 毛巾 洗洁精 擦玻器 吸尘器 除胶剂\",\r\n\t\t\t\t\t\t\tlongitude: \"120.17557880007,30.248398420426\",\r\n\t\t\t\t\t\t\t\"name|1\": [\"日常保洁\",\"开荒保洁\",\"上门除甲醛\",\"家电维修\"],\r\n\t\t\t\t\t\t\torigin: '@county(true)',\r\n\t\t\t\t\t\t\tsend: \"开发者\",\r\n\t\t\t\t\t\t\tstate: 1,\r\n\t\t\t\t\t\t\ttel: \"181****8028\",\r\n\t\t\t\t\t\t\t\"type|1\": [\"日常保洁\",\"开荒保洁\",\"上门除甲醛\",\"家电维修\"],\r\n\t\t\t\t\t\t\tuid: 1\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\treturn orderData\r\n\t\t\t},\r\n\t\t\t// 位置授权\r\n\t\t\tgetAuthorizeInfo(){\r\n\t\t\t\tconst that = this;\r\n\t\t\t\tuni.authorize({\r\n\t\t\t\t\tscope: 'scope.userLocation',\r\n\t\t\t\t\tsuccess() { // 允许授权\r\n\t\t\t\t\t\tthat.getLocationInfo();\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(){    // 拒绝授权\r\n\t\t\t\t\t\tthat.openConfirm();\r\n\t\t\t\t\t\tthat.address =\"未授权\";\r\n\t\t\t\t\t\tconsole.log(\"你拒绝了授权，无法获得周边信息\")\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 获取地理位置\r\n\t\t\t// 获取用户地理位置经纬都\r\n\t\t\tgetLocationInfo(){\r\n\t\t\t\tlet that  = this;\r\n\t\t\t    uni.getLocation({\r\n\t\t\t    \ttype: 'gcj02',\r\n\t\t\t    \tisHighAccuracy:true,\r\n\t\t\t    \tsuccess(res) {\r\n\t\t\t    \t\tconsole.log(res);\r\n\t\t\t    \t\tconsole.log('当前位置的经度：' + res.longitude);\r\n\t\t\t    \t\tconsole.log('当前位置的纬度：' + res.latitude);\r\n\t\t\t    \t\tthat.latitude = res.latitude;\r\n\t\t\t    \t\tthat.longitude = res.longitude;\r\n\t\t\t    \t\t//注册页面经纬度缓存\r\n\t\t\t    \t\tuni.setStorageSync('longitude', res.longitude);\r\n\t\t\t    \t\tuni.setStorageSync('latitude', res.latitude);\r\n\t\t\t    \t\t//百度地图\r\n\t\t\t    \t\tvar BMap = new bmap.BMapWX({\r\n\t\t\t    \t\t\tak: 'q58GRKnjyQGGXI72GMdHKBBUaHEIKSyc'\r\n\t\t\t    \t\t});\r\n\t\t\t    \t\tBMap.regeocoding({\r\n\t\t\t    \t\t\tlocation: res.latitude + \",\" + res.longitude,\r\n\t\t\t    \t\t\t// location:\"116.409443,39.909843\",\r\n\t\t\t    \t\t\tsuccess(res) {\r\n\t\t\t    \t\t\t\t// console.log(res.wxMarkerData[0].address);\r\n\t\t\t    \t\t\t\tconst address = res.wxMarkerData[0].address.substring(3);\r\n\t\t\t    \t\t\t\t// console.log(this);\r\n\t\t\t    \t\t\t\tthat.address = address;\r\n\t\t\t    \t\t\t\tuni.setStorageSync('address', address);\r\n\t\t\t    \t\t\t\t// console.log(address);\r\n\t\t\t\t\t\t\t\tconst towns = res.wxMarkerData[0].address.indexOf(\"省\");\r\n\t\t\t\t\t\t\t\tconst shi = res.wxMarkerData[0].address.indexOf(\"市\");\r\n\t\t\t\t\t\t\t\tconsole.log(\"省下表\"+towns);\r\n\t\t\t\t\t\t\t\tconsole.log(\"市下表\"+shi);\r\n\t\t\t\t\t\t\t\tconst town = res.wxMarkerData[0].address.substring(towns+1,shi+1);\r\n\t\t\t\t\t\t\t\tconsole.log(town);\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('town', town);\r\n\t\t\t\t\t\t\t\t// that.getWOrkstay();\r\n\t\t\t    \t\t\t},\r\n\t\t\t    \t\t\tfail(error) {\r\n\t\t\t    \t\t\t\tconsole.log(error);\r\n\t\t\t    \t\t\t\tconsole.log(\"失败\");\r\n\t\t\t    \t\t\t}\r\n\t\t\t    \r\n\t\t\t    \t\t})\r\n\t\t\t    \t},\r\n\t\t\t    \tfail(res) {\r\n\t\t\t    \t\tconsole.log(res);\r\n\t\t\t    \t\t\r\n\t\t\t    \t}\r\n\t\t\t    });\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 再次获取授权\r\n\t\t\t// 当用户第一次拒绝后再次请求授权\r\n\t\t\topenConfirm(){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '请求授权当前位置',\r\n\t\t\t\t\tcontent: '需要获取您的地理位置，请确认授权',\r\n\t\t\t\t\tsuccess: (res)=> {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\t  success(res) {\r\n\t\t\t\t\t\t\t    console.log(res.authSetting)\r\n\t\t\t\t\t\t\t\t// that.getLocationInfo();\r\n\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t});// 打开地图权限设置\r\n\t\t\t\t\t\t} else if (res.cancel) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '你拒绝了授权，无法获得周边信息',\r\n\t\t\t\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\t\t\t\tduration: 1000\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//控件被下拉\r\n\t\t\t\r\n\t\t\tgetAllClass(){\r\n\t\t\t    return new Promise((resolve, reject) => {\r\n\t\t\t\t\t\r\n                resolve(this.checklogin());\r\n\r\n\t\t\t       \r\n\t\t\t    })\r\n\t\t\t}\r\n\t\t},\r\n\t\t\r\n\t\t//自定义分享页面\r\n\t\tonShareAppMessage(e){\r\n\t\t\treturn {\r\n\t\t\t\ttitle: this.$overShare.title,\r\n\t\t\t\tpath: this.$overShare.path,\r\n\t\t\t\timageUrl:this.$overShare.imageUrl,\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t/* 顶部导航栏自定义 */\r\n\t.slot-wrap {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\t/* 如果您想让slot内容占满整个导航栏的宽度 */\r\n\t\t/* flex: 1; */\r\n\t\t/* 如果您想让slot内容与导航栏左右有空隙 */\r\n\t\tpadding: 0 25rpx;\r\n\t\tcolor: #FFFFFF;\r\n\t\tmargin-top: 2upx;\r\n\t\tfont-size: 22upx;\r\n\t}\r\n\t/* 数字角标 */\r\n\t.badge {\r\n\t\t\tbackground-color: blue;\r\n\t\t\tcolor: white;\r\n\t\t\tposition: absolute;\r\n\t\t\ttop: 200upx;\r\n\t\t\tright: 20upx;\r\n\t\t}\r\n\t.status_bar {\r\n\t\theight: var(--status-bar-height);\r\n\t\twidth: 100%;\r\n\t}\r\n\r\n\t/* content */\r\n\t.content {}\r\n\r\n\t/* < 地理位置 */\r\n\t.location {\r\n\t\tbackground-color: #f85f31;\r\n\t\twidth: 100%;\r\n\t\theight: 51upx;\r\n\t\tcolor: #FFFFFF;\r\n\t\tpadding-left: 25upx;\r\n\t\tpadding-right: 25upx;\r\n\t}\r\n\r\n\t.location .icondiliweizhi {\r\n\t\tfont-size: 28upx;\r\n\t\tpadding-right: 10upx;\r\n\t}\r\n\r\n\t/* tabs */\r\n\t.tab-bar {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\tpadding-left: 25upx;\r\n\t\tpadding-right: 25upx;\r\n\t\tmargin-top: 40upx;\r\n\t\tmargin-bottom: 40upx;\r\n\t}\r\n\r\n\t.tab-bar view {\r\n\t\twidth: 340upx;\r\n\t\theight: 76upx;\r\n\t\tbackground-color: #CCCCCC;\r\n\t\tcolor: #FFFFFF;\r\n\t\tborder-radius: 8upx;\r\n\t\tfont-size: 40upx;\r\n\t\tfont-weight: bold;\r\n\t\tline-height: 76upx;\r\n\t\ttext-align: center;\r\n\t}\r\n\r\n\t.tab-bar .active {\r\n\t\tbackground: linear-gradient(90deg,  #54C3F1, #00ABEB);\r\n\t}\r\n\r\n\tuni-scroll-view .uni-scroll-view::-webkit-scrollbar {\r\n\t\t/* 隐藏滚动条，但依旧具备可以滚动的功能 */\r\n\t\t/* display: none */\r\n\t}\r\n\r\n\t/* xss中添加以下样式代码 */\r\n\t/*隐藏滚动条*/\r\n\t/* ::-webkit-scrollbar {\r\n\t\twidth: 0;\r\n\t\theight: 0;\r\n\t\tcolor: transparent;\r\n\t} */\r\n\r\n\t\r\n</style>\r\n","import mod from \"-!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=57280228&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../谷歌下载/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=57280228&scoped=true&lang=css&\""],"sourceRoot":""}