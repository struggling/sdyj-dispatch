{"version":3,"sources":["webpack:///E:/项目/速达易家派单系统/uview-ui/components/u-upload/u-upload.vue?ddab","webpack:///E:/项目/速达易家派单系统/uview-ui/components/u-upload/u-upload.vue?5270","webpack:///E:/项目/速达易家派单系统/uview-ui/components/u-upload/u-upload.vue?8a21","webpack:///E:/项目/速达易家派单系统/uview-ui/components/u-upload/u-upload.vue?050d","webpack:///E:/项目/速达易家派单系统/uview-ui/components/u-upload/u-upload.vue","webpack:///E:/项目/速达易家派单系统/uview-ui/components/u-upload/u-upload.vue?b524"],"names":["__webpack_require__","r","__webpack_exports__","_u_upload_vue_vue_type_template_id_4385b1da_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_u_upload_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_1__","__WEBPACK_IMPORT_KEY__","key","d","_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_runtime_componentNormalizer_js__WEBPACK_IMPORTED_MODULE_3__","component","Object","renderjs","options","__file","_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_templateLoader_js_vue_loader_options_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_16_0_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_template_js_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_uni_app_loader_page_meta_js_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_u_upload_vue_vue_type_template_id_4385b1da_scoped_true___WEBPACK_IMPORTED_MODULE_0__","render","staticRenderFns","recyclableRender","components","u-icon","e","then","bind","u-line-progress","_vm","this","_h","$createElement","g0","_self","_c","$u","addUnit","width","g1","height","g2","g3","$mp","data","assign","$root","_withStripped","_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_u_upload_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0__","_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_babel_loader_lib_index_js_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_12_1_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_script_js_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_u_upload_vue_vue_type_script_lang_js___WEBPACK_IMPORTED_MODULE_0___default","n","name","props","showUploadList","type","Boolean","default","action","String","maxCount","Number","showProgress","disabled","imageMode","header","formData","sizeType","Array","sourceType","previewFullImage","multiple","deletable","maxSize","MAX_VALUE","fileList","uploadText","autoUpload","showTips","customBtn","delBgColor","delColor","delIcon","toJson","beforeUpload","Function","limitType","index","mounted","lists","isInCount","uploading","watch","immediate","handler","val","_this","map","value","some","url","push","error","progress","$emit","methods","clear","reUpload","uploadFile","selectFile","_this2","camera","compressed","maxDuration","newMaxCount","length","Promise","resolve","reject","uni","chooseImage","count","success","fail","res","listOldLength","tempFiles","checkFileExt","size","showToast","path","file","catch","message","force","arguments","undefined","title","icon","upload","retry","response","showLoading","_uploadFile","_regenerator","mark","_callee","beforeResponse","_this3","_args","wrap","_context","prev","next","abrupt","$parent","call","err","filePath","test","jsonString","JSON","parse","includes","statusCode","uploadError","complete","hideLoading","onProgressUpdate","stop","apply","deleteItem","_this4","showModal","content","confirm","process","uploadTask","abort","splice","$forceUpdate","remove","doPreviewImage","_this5","images","item","previewImage","urls","current","noArrowExt","fileExt","replace","toLowerCase","ext","concat","_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_8_oneOf_1_2_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_4_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_u_upload_vue_vue_type_style_index_0_id_4385b1da_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_1_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_css_loader_index_js_ref_8_oneOf_1_2_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_loaders_stylePostLoader_js_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_3_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_4_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_webpack_preprocess_loader_index_js_ref_8_oneOf_1_5_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_vue_cli_plugin_uni_packages_vue_loader_lib_index_js_vue_loader_options_D_HBuiderX_HBuilderX_plugins_uniapp_cli_node_modules_dcloudio_webpack_uni_mp_loader_lib_style_js_u_upload_vue_vue_type_style_index_0_id_4385b1da_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default"],"mappings":"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","file":"uview-ui/components/u-upload/u-upload.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./u-upload.vue?vue&type=template&id=4385b1da&scoped=true&\"\nvar renderjs\nimport script from \"./u-upload.vue?vue&type=script&lang=js&\"\nexport * from \"./u-upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./u-upload.vue?vue&type=style&index=0&id=4385b1da&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4385b1da\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4385b1da')) {\n      api.createRecord('4385b1da', component.options)\n    } else {\n      api.reload('4385b1da', component.options)\n    }\n    module.hot.accept(\"./u-upload.vue?vue&type=template&id=4385b1da&scoped=true&\", function () {\n      api.rerender('4385b1da', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"E:/项目/速达易家派单系统/uview-ui/components/u-upload/u-upload.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./u-upload.vue?vue&type=template&id=4385b1da&scoped=true&\"","var components = {\n  \"u-icon\": () =>\n    import(/* webpackChunkName: \"uview-ui/components/u-icon/u-icon\" */ \"@/uview-ui/components/u-icon/u-icon.vue\"),\n  \"u-line-progress\": () =>\n    import(/* webpackChunkName: \"uview-ui/components/u-line-progress/u-line-progress\" */ \"@/uview-ui/components/u-line-progress/u-line-progress.vue\")\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.$u.addUnit(_vm.width)\n  var g1 = _vm.$u.addUnit(_vm.height)\n  var g2 = _vm.$u.addUnit(_vm.width)\n  var g3 = _vm.$u.addUnit(_vm.height)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n        g2: g2,\n        g3: g3\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./u-upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./u-upload.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\n/**\r\n * upload 图片上传\r\n * @description 该组件用于上传图片场景\r\n * @tutorial https://www.uviewui.com/components/upload.html\r\n * @property {String} action 服务器上传地址\r\n * @property {String Number} max-count 最大选择图片的数量（默认99）\r\n * @property {Boolean} custom-btn 如果需要自定义选择图片的按钮，设置为true（默认false）\r\n * @property {Boolean} show-progress 是否显示进度条（默认true）\r\n * @property {Boolean} disabled 是否启用(显示/移仓)组件（默认false）\r\n * @property {String} image-mode 预览图片等显示模式，可选值为uni的image的mode属性值（默认aspectFill）\r\n * @property {String} del-icon 右上角删除图标名称，只能为uView内置图标\r\n * @property {String} del-bg-color 右上角关闭按钮的背景颜色\r\n * @property {String | Number} index 在各个回调事件中的最后一个参数返回，用于区别是哪一个组件的事件\r\n * @property {String} del-color 右上角关闭按钮图标的颜色\r\n * @property {Object} header 上传携带的头信息，对象形式\r\n * @property {Object} form-data 上传额外携带的参数\r\n * @property {String} name 上传文件的字段名，供后端获取使用（默认file）\r\n * @property {Array<String>} size-type original 原图，compressed 压缩图，默认二者都有（默认['original', 'compressed']）\r\n * @property {Array<String>} source-type 选择图片的来源，album-从相册选图，camera-使用相机，默认二者都有（默认['album', 'camera']）\r\n * @property {Boolean} preview-full-image\t是否可以通过uni.previewImage预览已选择的图片（默认true）\r\n * @property {Boolean} multiple\t是否开启图片多选，部分安卓机型不支持（默认true）\r\n * @property {Boolean} deletable 是否显示删除图片的按钮（默认true）\r\n * @property {String Number} max-size 选择单个文件的最大大小，单位B(byte)，默认不限制（默认Number.MAX_VALUE）\r\n * @property {Array<Object>} file-list 默认显示的图片列表，数组元素为对象，必须提供url属性\r\n * @property {Boolean} upload-text 选择图片按钮的提示文字（默认“选择图片”）\r\n * @property {Boolean} auto-upload 选择完图片是否自动上传，见上方说明（默认true）\r\n * @property {Boolean} show-tips 特殊情况下是否自动提示toast，见上方说明（默认true）\r\n * @property {Boolean} show-upload-list 是否显示组件内部的图片预览（默认true）\r\n * @event {Function} on-oversize 图片大小超出最大允许大小\r\n * @event {Function} on-preview 全屏预览图片时触发\r\n * @event {Function} on-remove 移除图片时触发\r\n * @event {Function} on-success 图片上传成功时触发\r\n * @event {Function} on-change 图片上传后，无论成功或者失败都会触发\r\n * @event {Function} on-error 图片上传失败时触发\r\n * @event {Function} on-progress 图片上传过程中的进度变化过程触发\r\n * @event {Function} on-uploaded 所有图片上传完毕触发\r\n * @event {Function} on-choose-complete 每次选择图片后触发，只是让外部可以得知每次选择后，内部的文件列表\r\n * @example <u-upload :action=\"action\" :file-list=\"fileList\" ></u-upload>\r\n */\r\nexport default {\r\n\tname: 'u-upload',\r\n\tprops: {\r\n\t\t//是否显示组件自带的图片预览功能\r\n\t\tshowUploadList: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 后端地址\r\n\t\taction: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: ''\r\n\t\t},\r\n\t\t// 最大上传数量\r\n\t\tmaxCount: {\r\n\t\t\ttype: [String, Number],\r\n\t\t\tdefault: 52\r\n\t\t},\r\n\t\t//  是否显示进度条\r\n\t\tshowProgress: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 是否启用\r\n\t\tdisabled: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t// 预览上传的图片时的裁剪模式，和image组件mode属性一致\r\n\t\timageMode: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'aspectFill'\r\n\t\t},\r\n\t\t// 头部信息\r\n\t\theader: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 额外携带的参数\r\n\t\tformData: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 上传的文件字段名\r\n\t\tname: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'file'\r\n\t\t},\r\n\t\t// 所选的图片的尺寸, 可选值为original compressed\r\n\t\tsizeType: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn ['original', 'compressed'];\r\n\t\t\t}\r\n\t\t},\r\n\t\tsourceType: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn ['album', 'camera'];\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 是否在点击预览图后展示全屏图片预览\r\n\t\tpreviewFullImage: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 是否开启图片多选，部分安卓机型不支持\r\n\t\tmultiple: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 是否展示删除按钮\r\n\t\tdeletable: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 文件大小限制，单位为byte\r\n\t\tmaxSize: {\r\n\t\t\ttype: [String, Number],\r\n\t\t\tdefault: Number.MAX_VALUE\r\n\t\t},\r\n\t\t// 显示已上传的文件列表\r\n\t\tfileList: {\r\n\t\t\ttype: Array,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn [];\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 上传区域的提示文字\r\n\t\tuploadText: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '选择图片'\r\n\t\t},\r\n\t\t// 是否自动上传\r\n\t\tautoUpload: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 是否显示toast消息提示\r\n\t\tshowTips: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 是否通过slot自定义传入选择图标的按钮\r\n\t\tcustomBtn: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: false\r\n\t\t},\r\n\t\t// 内部预览图片区域和选择图片按钮的区域宽度\r\n\t\twidth: {\r\n\t\t\ttype: [String, Number],\r\n\t\t\tdefault: 200\r\n\t\t},\r\n\t\t// 内部预览图片区域和选择图片按钮的区域高度\r\n\t\theight: {\r\n\t\t\ttype: [String, Number],\r\n\t\t\tdefault: 200\r\n\t\t},\r\n\t\t// 右上角关闭按钮的背景颜色\r\n\t\tdelBgColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '#fa3534'\r\n\t\t},\r\n\t\t// 右上角关闭按钮的叉号图标的颜色\r\n\t\tdelColor: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: '#ffffff'\r\n\t\t},\r\n\t\t// 右上角删除图标名称，只能为uView内置图标\r\n\t\tdelIcon: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'close'\r\n\t\t},\r\n\t\t// 如果上传后的返回值为json字符串，是否自动转json\r\n\t\ttoJson: {\r\n\t\t\ttype: Boolean,\r\n\t\t\tdefault: true\r\n\t\t},\r\n\t\t// 上传前的钩子，每个文件上传前都会执行\r\n\t\tbeforeUpload: {\r\n\t\t\ttype: Function,\r\n\t\t\tdefault: null\r\n\t\t},\r\n\t\t// 允许上传的图片后缀\r\n\t\tlimitType:{\r\n\t\t\ttype: Array,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn ['png', 'jpg', 'jpeg', 'webp', 'gif'];\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 在各个回调事件中的最后一个参数返回，用于区别是哪一个组件的事件\r\n\t\tindex: {\r\n\t\t\ttype: [Number, String],\r\n\t\t\tdefault: ''\r\n\t\t}\r\n\t},\r\n\tmounted() {},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tlists: [],\r\n\t\t\tisInCount: true,\r\n\t\t\tuploading: false\r\n\t\t};\r\n\t},\r\n\twatch: {\r\n\t\tfileList: {\r\n\t\t\timmediate: true,\r\n\t\t\thandler(val) {\r\n\t\t\t\tval.map(value => {\r\n\t\t\t\t\t// 首先检查内部是否已经添加过这张图片，因为外部绑定了一个对象给fileList的话(对象引用)，进行修改外部fileList\r\n\t\t\t\t\t// 时，会触发watch，导致重新把原来的图片再次添加到this.lists\r\n\t\t\t\t\t// 数组的some方法意思是，只要数组元素有任意一个元素条件符合，就返回true，而另一个数组的every方法的意思是数组所有元素都符合条件才返回true\r\n\t\t\t\t\tlet tmp = this.lists.some(val => {\r\n\t\t\t\t\t\treturn val.url == value.url;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t// 如果内部没有这个图片(tmp为false)，则添加到内部\r\n\t\t\t\t\t!tmp && this.lists.push({ url: value.url, error: false, progress: 100 });\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 监听lists的变化，发出事件\r\n\t\tlists(n) {\r\n\t\t\tthis.$emit('on-list-change', n, this.index);\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 清除列表\r\n\t\tclear() {\r\n\t\t\tthis.lists = [];\r\n\t\t},\r\n\t\t// 重新上传队列中上传失败的所有文件\r\n\t\treUpload() {\r\n\t\t\tthis.uploadFile();\r\n\t\t},\r\n\t\t// 选择图片\r\n\t\tselectFile() {\r\n\t\t\tif (this.disabled) return;\r\n\t\t\tconst { name = '', maxCount, multiple, maxSize, sizeType, lists, camera, compressed, maxDuration, sourceType } = this;\r\n\t\t\tlet chooseFile = null;\r\n\t\t\tconst newMaxCount = maxCount - lists.length;\r\n\t\t\t// 设置为只选择图片的时候使用 chooseImage 来实现\r\n\t\t\tchooseFile = new Promise((resolve, reject) => {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: multiple ? (newMaxCount > 9 ? 9 : newMaxCount) : 1,\r\n\t\t\t\t\tsourceType: sourceType,\r\n\t\t\t\t\tsizeType,\r\n\t\t\t\t\tsuccess: resolve,\r\n\t\t\t\t\tfail: reject\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tchooseFile\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\tlet file = null;\r\n\t\t\t\t\tlet listOldLength = this.lists.length;\r\n\t\t\t\t\tres.tempFiles.map((val, index) => {\r\n\t\t\t\t\t\t// 检查文件后缀是否允许，如果不在this.limitType内，就会返回false\r\n\t\t\t\t\t\tif(!this.checkFileExt(val)) return ;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 如果是非多选，index大于等于1或者超出最大限制数量时，不处理\r\n\t\t\t\t\t\tif (!multiple && index >= 1) return;\r\n\t\t\t\t\t\tif (val.size > maxSize) {\r\n\t\t\t\t\t\t\tthis.$emit('on-oversize', val, this.lists, this.index);\r\n\t\t\t\t\t\t\tthis.showToast('超出允许的文件大小');\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (maxCount <= lists.length) {\r\n\t\t\t\t\t\t\t\tthis.$emit('on-exceed', val, this.lists, this.index);\r\n\t\t\t\t\t\t\t\tthis.showToast('超出最大允许的文件个数');\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlists.push({\r\n\t\t\t\t\t\t\t\turl: val.path,\r\n\t\t\t\t\t\t\t\tprogress: 0,\r\n\t\t\t\t\t\t\t\terror: false,\r\n\t\t\t\t\t\t\t\tfile: val\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t// 每次图片选择完，抛出一个事件，并将当前内部选择的图片数组抛出去\r\n\t\t\t\t\tthis.$emit('on-choose-complete', this.lists, this.index);\r\n\t\t\t\t\tif (this.autoUpload) this.uploadFile(listOldLength);\r\n\t\t\t\t})\r\n\t\t\t\t.catch(error => {\r\n\t\t\t\t\t// this.$emit('on-error', error);\r\n\t\t\t\t});\r\n\t\t},\r\n\t\t// 提示用户消息\r\n\t\tshowToast(message, force = false) {\r\n\t\t\tif (this.showTips || force) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: message,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 该方法供用户通过ref调用，手动上传\r\n\t\tupload() {\r\n\t\t\tthis.uploadFile();\r\n\t\t},\r\n\t\t// 对失败的图片重新上传\r\n\t\tretry(index) {\r\n\t\t\tthis.lists[index].progress = 0;\r\n\t\t\tthis.lists[index].error = false;\r\n\t\t\tthis.lists[index].response = null;\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '重新上传'\r\n\t\t\t});\r\n\t\t\tthis.uploadFile(index);\r\n\t\t},\r\n\t\t// 上传图片\r\n\t\tasync uploadFile(index = 0) {\r\n\t\t\tif (this.disabled) return;\r\n\t\t\tif (this.uploading) return;\r\n\t\t\t// 全部上传完成\r\n\t\t\tif (index >= this.lists.length) {\r\n\t\t\t\tthis.$emit('on-uploaded', this.lists, this.index);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// 检查是否是已上传或者正在上传中\r\n\t\t\tif (this.lists[index].progress == 100) {\r\n\t\t\t\tif (this.autoUpload == false) this.uploadFile(index + 1);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// 执行before-upload钩子\r\n\t\t\tif(this.beforeUpload && typeof(this.beforeUpload) === 'function') {\r\n\t\t\t\t// 执行回调，同时传入索引和文件列表当作参数\r\n\t\t\t\t// 在微信，支付宝等环境(H5正常)，会导致父组件定义的customBack()函数体中的this变成子组件的this\r\n\t\t\t\t// 通过bind()方法，绑定父组件的this，让this.customBack()的this为父组件的上下文\r\n\t\t\t\t// 因为upload组件可能会被嵌套在其他组件内，比如u-form，这时this.$parent其实为u-form的this，\r\n\t\t\t\t// 非页面的this，所以这里需要往上历遍，一直寻找到最顶端的$parent，这里用了this.$u.$parent.call(this)\r\n\t\t\t\t// 明白意思即可，无需纠结this.$u.$parent.call(this)的细节\r\n\t\t\t\tlet beforeResponse = this.beforeUpload.bind(this.$u.$parent.call(this))(index, this.lists);\r\n\t\t\t\t// 判断是否返回了promise\r\n\t\t\t\tif (!!beforeResponse && typeof beforeResponse.then === 'function') {\r\n\t\t\t\t\tawait beforeResponse.then(res => {\r\n\t\t\t\t\t\t// promise返回成功，不进行动作，继续上传\r\n\t\t\t\t\t}).catch(err => {\r\n\t\t\t\t\t\t// 进入catch回调的话，继续下一张\r\n\t\t\t\t\t\treturn this.uploadFile(index + 1);\r\n\t\t\t\t\t})\r\n\t\t\t\t} else if(beforeResponse === false) {\r\n\t\t\t\t\t // 如果返回false，继续下一张图片的上传\r\n\t\t\t\t\treturn this.uploadFile(index + 1);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// 检查上传地址\r\n\t\t\tif (!this.action) {\r\n\t\t\t\tthis.showToast('请配置上传地址', true);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.lists[index].error = false;\r\n\t\t\tthis.uploading = true;\r\n\t\t\t// 创建上传对象\r\n\t\t\tconst task = uni.uploadFile({\r\n\t\t\t\turl: this.action,\r\n\t\t\t\tfilePath: this.lists[index].url,\r\n\t\t\t\tname: this.name,\r\n\t\t\t\tformData: this.formData,\r\n\t\t\t\theader: this.header,\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t// 判断是否json字符串，将其转为json格式\r\n\t\t\t\t\tlet data = this.toJson && this.$u.test.jsonString(res.data) ? JSON.parse(res.data) : res.data;\r\n\t\t\t\t\tif (![200, 201, 204].includes(res.statusCode)) {\r\n\t\t\t\t\t\tthis.uploadError(index, data);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// 上传成功\r\n\t\t\t\t\t\tthis.lists[index].response = data;\r\n\t\t\t\t\t\tthis.lists[index].progress = 100;\r\n\t\t\t\t\t\tthis.lists[index].error = false;\r\n\t\t\t\t\t\tthis.$emit('on-success', data, index, this.lists, this.index);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: e => {\r\n\t\t\t\t\tthis.uploadError(index, e);\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: res => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tthis.uploading = false;\r\n\t\t\t\t\tthis.uploadFile(index + 1);\r\n\t\t\t\t\tthis.$emit('on-change', res, index, this.lists, this.index);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\ttask.onProgressUpdate(res => {\r\n\t\t\t\tif (res.progress > 0) {\r\n\t\t\t\t\tthis.lists[index].progress = res.progress;\r\n\t\t\t\t\tthis.$emit('on-progress', res, index, this.lists, this.index);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 上传失败\r\n\t\tuploadError(index, err) {\r\n\t\t\tthis.lists[index].progress = 0;\r\n\t\t\tthis.lists[index].error = true;\r\n\t\t\tthis.lists[index].response = null;\r\n\t\t\tthis.$emit('on-error', err, index, this.lists, this.index);\r\n\t\t\tthis.showToast('上传失败，请重试');\r\n\t\t},\r\n\t\t// 删除一个图片\r\n\t\tdeleteItem(index) {\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle: '提示',\r\n\t\t\t\tcontent: '您确定要删除此项吗？',\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\tif (this.lists[index].process < 100 && this.lists[index].process > 0) {\r\n\t\t\t\t\t\t\ttypeof this.lists[index].uploadTask != 'undefined' && this.lists[index].uploadTask.abort();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.lists.splice(index, 1);\r\n\t\t\t\t\t\tthis.$forceUpdate();\r\n\t\t\t\t\t\tthis.$emit('on-remove', index, this.lists, this.index);\r\n\t\t\t\t\t\tthis.showToast('移除成功');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 用户通过ref手动的形式，移除一张图片\r\n\t\tremove(index) {\r\n\t\t\t// 判断索引的合法范围\r\n\t\t\tif (index >= 0 && index < this.lists.length) {\r\n\t\t\t\tthis.lists.splice(index, 1);\r\n\t\t\t\tthis.$emit('on-list-change', this.lists, this.index);\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 预览图片\r\n\t\tdoPreviewImage(url, index) {\r\n\t\t\tif (!this.previewFullImage) return;\r\n\t\t\tconst images = this.lists.map(item => item.url || item.path);\r\n\t\t\tuni.previewImage({\r\n\t\t\t\turls: images,\r\n\t\t\t\tcurrent: url,\r\n\t\t\t\tsuccess: () => {\r\n\t\t\t\t\tthis.$emit('on-preview', url, this.lists, this.index);\r\n\t\t\t\t},\r\n\t\t\t\tfail: () => {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '预览图片失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 判断文件后缀是否允许\r\n\t\tcheckFileExt(file) {\r\n\t\t\t// 检查是否在允许的后缀中\r\n\t\t\tlet noArrowExt = false;\r\n\t\t\t// 获取后缀名\r\n\t\t\tlet fileExt = '';\r\n\t\t\tconst reg = /.+\\./;\r\n\t\t\t// 如果是H5，需要从name中判断\r\n\r\n\r\n\r\n\t\t\t// 非H5，需要从path中读取后缀\r\n\r\n\t\t\tfileExt = file.path.replace(reg, \"\").toLowerCase();\r\n\r\n\t\t\t// 使用数组的some方法，只要符合limitType中的一个，就返回true\r\n\t\t\tnoArrowExt = this.limitType.some(ext => {\r\n\t\t\t\t// 转为小写\r\n\t\t\t\treturn ext.toLowerCase() === fileExt;\r\n\t\t\t})\r\n\t\t\tif(!noArrowExt) this.showToast(`不允许选择${fileExt}格式的文件`);\r\n\t\t\treturn noArrowExt;\r\n\t\t}\r\n\t}\r\n};\r\n","import mod from \"-!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./u-upload.vue?vue&type=style&index=0&id=4385b1da&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-1!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\lib\\\\loader.js??ref--8-oneOf-1-4!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuiderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./u-upload.vue?vue&type=style&index=0&id=4385b1da&lang=scss&scoped=true&\""],"sourceRoot":""}