(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/index/index"],{37:
/*!***************************************************************!*\
  !*** E:/项目/速达易家派单系统/main.js?{"page":"pages%2Findex%2Findex"} ***!
  \***************************************************************/
/*! no static exports found */function(t,e,o){"use strict";(function(t){o(/*! uni-pages */4);e(o(/*! vue */2));function e(t){return t&&t.__esModule?t:{default:t}}t(e(o(/*! ./pages/index/index.vue */38)).default)}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).createPage)},38:
/*!********************************************!*\
  !*** E:/项目/速达易家派单系统/pages/index/index.vue ***!
  \********************************************/
/*! no static exports found */function(t,e,o){"use strict";o.r(e);var n=o(/*! ./index.vue?vue&type=template&id=bb8efb34&scoped=true& */39),i=o(/*! ./index.vue?vue&type=script&lang=js& */41);for(var l in i)"default"!==l&&function(t){o.d(e,t,function(){return i[t]})}(l);o(/*! ./index.vue?vue&type=style&index=0&id=bb8efb34&scoped=true&lang=css& */45);var s=o(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),a=Object(s.default)(i.default,n.render,n.staticRenderFns,!1,null,"bb8efb34",null,!1,n.components,void 0);a.options.__file="E:/项目/速达易家派单系统/pages/index/index.vue",e.default=a.exports},39:
/*!***************************************************************************************!*\
  !*** E:/项目/速达易家派单系统/pages/index/index.vue?vue&type=template&id=bb8efb34&scoped=true& ***!
  \***************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,o){"use strict";o.r(e);var n=o(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=bb8efb34&scoped=true& */40);o.d(e,"render",function(){return n.render}),o.d(e,"staticRenderFns",function(){return n.staticRenderFns}),o.d(e,"recyclableRender",function(){return n.recyclableRender}),o.d(e,"components",function(){return n.components})},40:
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/项目/速达易家派单系统/pages/index/index.vue?vue&type=template&id=bb8efb34&scoped=true& ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(t,e,o){"use strict";o.r(e),o.d(e,"render",function(){return i}),o.d(e,"staticRenderFns",function(){return s}),o.d(e,"recyclableRender",function(){return l}),o.d(e,"components",function(){return n});var n={"u-navbar":()=>o.e(/*! import() | uview-ui/components/u-navbar/u-navbar */"uview-ui/components/u-navbar/u-navbar").then(o.bind(null,/*! @/uview-ui/components/u-navbar/u-navbar.vue */136)),"u-notice-bar":()=>o.e(/*! import() | uview-ui/components/u-notice-bar/u-notice-bar */"uview-ui/components/u-notice-bar/u-notice-bar").then(o.bind(null,/*! @/uview-ui/components/u-notice-bar/u-notice-bar.vue */143)),"u-modal":()=>o.e(/*! import() | uview-ui/components/u-modal/u-modal */"uview-ui/components/u-modal/u-modal").then(o.bind(null,/*! @/uview-ui/components/u-modal/u-modal.vue */150)),"u-popup":()=>o.e(/*! import() | uview-ui/components/u-popup/u-popup */"uview-ui/components/u-popup/u-popup").then(o.bind(null,/*! @/uview-ui/components/u-popup/u-popup.vue */157))},i=function(){var t=this.$createElement;this._self._c},l=!1,s=[];i._withStripped=!0},41:
/*!*********************************************************************!*\
  !*** E:/项目/速达易家派单系统/pages/index/index.vue?vue&type=script&lang=js& ***!
  \*********************************************************************/
/*! no static exports found */function(t,e,o){"use strict";o.r(e);var n=o(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js& */42),i=o.n(n);for(var l in n)"default"!==l&&function(t){o.d(e,t,function(){return n[t]})}(l);e.default=i.a},42:
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/项目/速达易家派单系统/pages/index/index.vue?vue&type=script&lang=js& ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(/*! ../../common//mock.mp.js */43),i=o(/*! ../../libs/bmap-wx.js */44),l={components:{loadMore:function(){return o.e(/*! import() | components/common/load-more */"components/common/load-more").then(o.bind(null,/*! ../../components/common/load-more.vue */164))},addTip:function(){return o.e(/*! import() | components/struggler-uniapp-add-tip/struggler-uniapp-add-tip */"components/struggler-uniapp-add-tip/struggler-uniapp-add-tip").then(o.bind(null,/*! ../../components/struggler-uniapp-add-tip/struggler-uniapp-add-tip */171))},noThing:function(){return o.e(/*! import() | components/common/no-thing */"components/common/no-thing").then(o.bind(null,/*! ../../components/common/no-thing.vue */178))},orderList:function(){return o.e(/*! import() | components/index/orderlist */"components/index/orderlist").then(o.bind(null,/*! ../../components/index/orderlist.vue */185))},Already:function(){return o.e(/*! import() | components/index/already */"components/index/already").then(o.bind(null,/*! ../../components/index/already.vue */192))}},data:function(){return{tool:[],jl:[],latitude:"",longitude:"",tip:"点击「添加小程序」，下次访问更便捷",duration:1,istype:"",address:"当前位置",height:"",background:{backgroundImage:"linear-gradient(90deg, #00ABEB, #54C3F1)"},user_uid:"",showpopup:!1,show:!1,content:"恭喜您抢单成功，请前往已抢单界面查看详情！",loadtext:"上拉加载更多",notice:[],swiperheight:500,tabIndex:0,tabBars:[{name:"待抢单",id:"daiqiangdan"},{name:"已抢单",id:"yiqiangdan"}],orderlist:[],takelist:[],page:1}},onReady:function(){},onLoad:function(){var e=this,o=this;this.checklogin(),t.getSystemInfo({success:function(o){var n=o.windowHeight-t.upx2px(282);e.swiperheight=n,console.log(e.swiperheight)}}),t.getLocation({type:"gcj02",success:function(e){console.log("当前位置的经度："+e.longitude),console.log("当前位置的纬度："+e.latitude),o.latitude=e.latitude,o.longitude=e.longitude,t.setStorageSync("longitude",e.longitude),t.setStorageSync("latitude",e.latitude),new i.BMapWX({ak:"q58GRKnjyQGGXI72GMdHKBBUaHEIKSyc"}).regeocoding({location:e.latitude+","+e.longitude,success:function(t){var e=t.wxMarkerData[0].address.substring(3);console.log(this),o.address=e},fail:function(t){console.log(t),console.log("失败")}})},fail:function(){t.showToast({title:"拒绝获取当前位置"}),console.log("位置获取失败")}}),this.getNavbar(),this.user_uid=t.getStorageSync("user_uid");var n=t.getStorageSync("phone");if(console.log("uid的值:"+this.user_uid),n){console.log("打印假数据");var l=this.getmock();console.log(l),this.orderlist=l.orderlist.slice(0,4),console.log("数据长度为："+this.orderlist.length)}else this.getWOrkstay()},onPullDownRefresh:function(){console.log("下拉刷新")},methods:{xuanzhong:function(t){this.tabIndex=t,console.log(t)},tabChange:function(t){this.tabIndex=t.detail.current,1==this.tabIndex&&(this.showpopup=!0,this.getAlready())},loadmore:function(){if("上拉加载更多"==this.loadtext){this.loadtext="加载中...",console.log(this.loadtext);this.orderlist.length;this.page++,console.log("第几页："+this.page);var t=this.getmock();if(console.log("加载后端获取的数据"),3>t.orderlist.slice(3*(this.page-1)+1,3*this.page+1).length)this.loadtext="暂无更多数据",console.log(this.loadtext);else{var e=t.orderlist.slice(3*(this.page-1)+1,3*this.page+1);console.log(e),this.orderlist=this.orderlist.concat(e),this.loadtext="上拉加载更多",console.log(this.loadtext)}}},openModel:function(e){var o=t.getStorageSync("phone");if(o){var n=!0;n&&(n=!1,t.request({url:"https://applet.51tiaoyin.com/public/applet/work/take",method:"POST",dataType:JSON,data:{uid:this.user_uid,code:i,WorkNautica:[this.longitude,this.latitude],phone:o},success:function(o){if(console.log(o),console.log("当前点击的为："+e),o.code=200){l.show=!0;var n=l.orderlist.splice(e,1);console.log(n)}else t.showToast({title:"无网络!"})},fail:function(){console.log(res)}}))}else t.showModal({title:"提示",content:"请先完成师傅服务类型注册，在抢单",success:function(e){e.confirm?(console.log("用户点击确定"),t.navigateTo({url:"../settlement/settlement"})):e.cancel&&console.log("用户点击取消")}});var i=this.orderlist[e].code,l=this;t.showToast({title:s});var s=!0},close:function(){this.$refs.popup.close()},openWaitlist:function(){t.request({url:"https://applet.51tiaoyin.com/public/applet/work/already",method:"GET",dataType:JSON,data:{uid:this.user_uid},success:function(t){console.log("已抢单"),console.log(t)},fail:function(t){console.log(t)}})},countDistance:function(t,e,o,n){function i(t){return t*Math.PI/180}var l=i(t),s=i(e),a=i(o),r=i(n),c=Math.sin(l)*Math.sin(a);return c+=Math.cos(l)*Math.cos(a)*Math.cos(s-r),6378137*Math.acos(c)},getNavbar:function(){var t=n.Random;t.county(),t.cname(),t.city(),t.datetime();for(var e=n.mock({"list|3":[{name:"@cname()",city:"@city(true)","type|+1":["日常保洁","开荒保洁","上门除甲醛","上门维修"]}]}),o=0;o<e.list.length;o++){var i="恭喜--"+e.list[o].name+"--抢到"+e.list[o].city+"--"+e.list[o].type+"--订单";this.notice.push(i)}},getWOrkstay:function(){var e=this;t.request({url:"https://applet.51tiaoyin.com/public/applet/work/stay",method:"POST",dataType:JSON,data:{town:"成都",genre:["日常保洁","开荒保洁","上门除甲醛"],uid:this.user_uid},success:function(o){console.log(o);var n=JSON.parse(o.data);if(console.log(n.data),200==n.code){e.orderlist=n.data,console.log("订单列表:"),console.log(e.orderlist);for(var i=0;i<e.orderlist.length;i++){var l=e.orderlist[i].longitude,s=e.orderlist[i].label.split(" ");console.log(l);var a=l.split(",")[0],r=l.split(",")[1],c=e.countDistance(e.latitude,e.longitude,r,a);c=Math.floor(c/1e3*10)/10,e.jl.push(c),e.tool.push(s),console.log(e.jl),console.log(e.tool)}}else console.log(o),t.showToast({title:"无网络"})},fail:function(t){console.log(t)}})},getAlready:function(){var e=this;t.request({url:"https://applet.51tiaoyin.com/public/applet/work/already",method:"POST",dataType:JSON,data:{uid:this.user_uid},success:function(o){console.log(o);var n=JSON.parse(o.data);if(console.log(n.data),200==n.code){e.takelist=n.data,console.log("已抢单订单列表:"),console.log(e.takelist);for(var i=0;i<e.takelist.length;i++){var l=e.takelist[i].longitude,s=e.takelist[i].label.split(" ");console.log(l);var a=l.split(",")[0],r=l.split(",")[1],c=e.countDistance(e.latitude,e.longitude,r,a);c=Math.floor(c/1e3*10)/10,e.jl.push(c),e.tool.push(s),console.log(e.jl),console.log(e.tool)}}else console.log(o),t.showToast({title:"无网络"})},fail:function(t){console.log(t)}})},getmock:function(){var t=n.Random;return t.id(),t.county(),t.datetime(),n.mock({"orderlist|30-50":[{"Distance|1-100.2":1,"budget|100-500":500,code:"@id()","content|1":["日常保洁","开荒保洁","上门除甲醛","家电维修"],delete:0,destination:"",door_time:"@datetime()",duration:"时长：2小时",label:"扫把 毛巾 洗洁精 擦玻器 吸尘器 除胶剂",longitude:"120.17557880007,30.248398420426","name|1":["日常保洁","开荒保洁","上门除甲醛","家电维修"],origin:"@county(true)",send:"开发者",state:1,tel:"181****8028","type|1":["日常保洁","开荒保洁","上门除甲醛","家电维修"],uid:1}]})}}};e.default=l}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1).default)},45:
/*!*****************************************************************************************************!*\
  !*** E:/项目/速达易家派单系统/pages/index/index.vue?vue&type=style&index=0&id=bb8efb34&scoped=true&lang=css& ***!
  \*****************************************************************************************************/
/*! no static exports found */function(t,e,o){"use strict";o.r(e);var n=o(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=bb8efb34&scoped=true&lang=css& */46),i=o.n(n);for(var l in n)"default"!==l&&function(t){o.d(e,t,function(){return n[t]})}(l);e.default=i.a},46:
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-1!./node_modules/css-loader??ref--6-oneOf-1-2!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!E:/项目/速达易家派单系统/pages/index/index.vue?vue&type=style&index=0&id=bb8efb34&scoped=true&lang=css& ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,e,o){}},[[37,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/index/index.js.map